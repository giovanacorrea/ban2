<!DOCTYPE html>
<html>
{% block content %}
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="static/reserva.css"> 
    <title>Reserva</title>
</head>
<body>
    <img src="static/images/pousadaLogo-sfundo.png" alt="Logo">
    <h2>Reserva</h2>
    <form id="userForm" action="/CadastrarReserva" method="POST">
        <div class="form-section">
            <div class="form-container">
                <label for="cpf">CPF h√≥spede:</label>
                <input type="number" id="cpf" name="cpf">
                
                <label for="cupom">Cupom de desconto:</label>
                <input type="number" id="cupom" name="cupom">      
                
               
                <div class="dropdown">
                    <div class="dropdown">
                        <label for="numquarto">Quartos</label>
                        <input type="text" id="selectedRooms" placeholder="Selecione os quartos" readonly onclick="toggleDropdown()" />
                        <div id="checkboxDropdown" class="dropdown-content">
                            {% for quarto in quartos %}
                                <div class="checkbox-option">
                                    <input type="checkbox" name="numquarto" value="{{ quarto.codquarto }}" id="quarto-{{ quarto.codquarto }}" onchange="updateSelectedRooms()">
                                    <label for="quarto-{{ quarto.codquarto }}">{{ quarto.codquarto }} - {{ quarto.tipo_quarto }}</label>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <script>
                        function toggleDropdown() {
                            document.getElementById("checkboxDropdown").style.display = 
                                document.getElementById("checkboxDropdown").style.display === "none" ? "block" : "none";
                        }

                        function updateSelectedRooms() {
                            const checkboxes = document.querySelectorAll('#checkboxDropdown input[type="checkbox"]');
                            let selected = [];
                            
                            checkboxes.forEach((checkbox) => {
                                if (checkbox.checked) {
                                    selected.push(checkbox.nextElementSibling.textContent.trim());
                                }
                            });
                            
                            document.getElementById("selectedRooms").value = selected.join(", ");
                        }

                        // Fechar dropdown ao clicar fora dele
                        document.addEventListener('click', function(event) {
                            const dropdown = document.getElementById("checkboxDropdown");
                            const selectedRooms = document.getElementById("selectedRooms");
                            if (!dropdown.contains(event.target) && event.target !== selectedRooms) {
                                dropdown.style.display = "none";
                            }
                        });

                    </script>
                
                </div>
                
            </div>
            <div class="form-container">
            	<label for= "dataEntrada">Data de entrada:</label>
            	<input id="datainicio" type="date" name="datainicio">
            	
            	<label for= "dataSaida">Data de saida:</label>
            	<input id="datafim" type="date" name="datafim">
                
                <label for= "dataSaida">Estado da reserva</label>
            	<input id="estado" type="string" name="estado" placeholder="ativa">
            </div>           
        </div>
        <button type="submit" class="submit-button" id="submit-button">Reservar</button>
            {% with messages = get_flashed_messages() %}
            {% if messages %}
                <ul>
                    {% for message in messages %}
                        <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}
            </form>
            <footer>
                <div class="footer"></div>
            </footer>
        </body>
        {% endblock %}
</html>